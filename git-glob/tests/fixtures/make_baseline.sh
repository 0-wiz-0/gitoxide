#!/bin/bash
set -eu -o pipefail


git init -q
git config commit.gpgsign false
git config core.autocrlf false

while read -r pattern nomatch; do
  echo $pattern $nomatch
done <<EOF
"a*b*c"
"abc*abc*abc"
"some/**/needle.txt"
"some/**/**/needle.txt"
"/**/test"
"/**/test"
"/**/test"
"**/.*"
"**/.*"
".*/**"
".*/**"
"a[0-9]b"
"a[!0-9]b"
"a[!0-9]b"
"[!-]"  "-"
"*hello.txt"
"*hello.txt"
"*some/path/to/hello.txt"
"*some/path/to/hello.txt"
"a"
"./foo"
"**/foo"
"**/foo/bar"
"/*.c"
"*.c"
"**/m4/ltoptions.m4"
"a[^0-9]b"
"a[^0-9]b"
"[^-]"
"some/*/needle.txt"
"some/*/needle.txt"
"some/*/needle.txt"
".*/**"
"foo/**"
EOF

while read -r pattern match; do
  echo $pattern $match
done <<EOF
"a" "a" 
"a*b" "a_b" 
"a*b*c" "abc" 
"a*b*c" "a_b_c" 
"a*b*c" "a___b___c" 
"abc*abc*abc" "abcabcabcabcabcabcabc" 
"a*a*a*a*a*a*a*a*a" "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" 
"a*b[xyz]c*d" "abxcdbxcddd" 
"*.rs" ".rs" 
"☃" "☃" 
"some/**/needle.txt" "some/needle.txt"
"some/**/needle.txt" "some/one/needle.txt" 
"some/**/needle.txt" "some/one/two/needle.txt" 
"some/**/needle.txt" "some/other/needle.txt" 
"**" "abcde" 
"**" "" 
"**" ".asdf" 
"**" "/x/.asdf" 
"some/**/**/needle.txt" "some/needle.txt" 
"some/**/**/needle.txt" "some/one/needle.txt" 
"some/**/**/needle.txt" "some/one/two/needle.txt" 
"some/**/**/needle.txt" "some/other/needle.txt" 
"**/test"  "one/two/test"
"**/test"  "one/test"
"**/test"  "test"
"/**/test"  "/one/two/test"
"/**/test"  "/one/test"
"/**/test"  "/test"
"**/.*"  ".abc"
"**/.*"  "abc/.abc"
"**/foo/bar"  "foo/bar"
".*/**"  ".abc/abc"
"test/**"  "test/"
"test/**"  "test/one"
"test/**"  "test/one/two"
"some/*/needle.txt"  "some/one/needle.txt"
"a[0-9]b"  "a0b"
"a[0-9]b"  "a9b"
"a[!0-9]b"  "a_b"
"[a-z123]"  "1"
"[1a-z23]"  "1"
"[123a-z]"  "1"
"[abc-]"  "-"
"[-abc]"  "-"
"[-a-c]"  "b"
"[a-c-]"  "b"
"[-]"  "-"
"a[^0-9]b"  "a_b"
"*hello.txt"  "hello.txt"
"*hello.txt"  "gareth_says_hello.txt"
"*hello.txt"  "some/path/to/hello.txt"
"*hello.txt"  "some\\path\\to\\hello.txt"
"*hello.txt"  "/an/absolute/path/to/hello.txt"
"*some/path/to/hello.txt"  "some/path/to/hello.txt"
"*some/path/to/hello.txt"  "a/bigger/some/path/to/hello.txt" 
"_[[]_[]]_[?]_[*]_!_"  "_[_]_?_*_!_"
"aBcDeFg"  "aBcDeFg"  CASEI
"aBcDeFg"  "abcdefg"  CASEI
"aBcDeFg"  "ABCDEFG"  CASEI
"aBcDeFg"  "AbCdEfG"  CASEI
"a,b"  "a,b"
" "  " "
"{a,b}"  "a"
"{a,b}"  "b"
"{**/src/**,foo}"  "abc/src/bar"
"{**/src/**,foo}"  "foo"
"{[}],foo}"  "}"
"{foo}"  "foo"
"{}"  ""
"{,}"  ""
"{*.foo,*.bar,*.wat}"  "test.foo"
"{*.foo,*.bar,*.wat}"  "test.bar"
"{*.foo,*.bar,*.wat}"  "test.wat"
"abc/def"  "abc/def"
# unix only
"abc?def"  "abc/def"
# windows only
"abc?def"  "abc\\def"
"abc*def"  "abc/def"
"abc[/]def"  "abc/def"
# unix only
"abc\\def"  "abc/def"
# windows only
"abc\\def"  "abc/def"
"\\["  "["
"\\?"  "?"  
"\\*"  "*"  
"\\[a-z]"  "\\a"
"\\?"  "\\a"
"\\*"  "\\\\"
# unix only
"\\a"  "a"
# windows only
"\\a"  "/a"
EOF
